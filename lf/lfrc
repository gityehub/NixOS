set previewer ~/.config/lf/previewer.sh
set cleaner ~/.config/lf/cleaner.sh
# Custom Functions
 cmd open ${{
    case $(file --mime-type "$f" -bL) in
        text/*|application/json) vim "$f";;
        application/x-executable) vim "$f";;
        image/*) imv "$f";;
        video/*) setsid -f mpv --force-window=yes "$f" >/dev/null 2>&1;;
        audio/*) setsid -f mpv --force-window=yes "$f" >/dev/null 2>&1;;
        *) xdg-open "$f" ;;
    esac
}}

cmd mkdir %{{
  printf "Directory Name: "
  read ans
  mkdir $ans
}}

cmd mkfile %{{
  printf "File Name: "
  read ans
  touch $ans
}}

cmd chmod ${{
  printf "Mode Bits: "
  read ans

  for file in "$fx"
  do
    chmod $ans $file
  done

  lf -remote 'send reload'
}}

cmd fzf_jump ${{
  res="$(find . -maxdepth 3 | fzf --reverse --header='Jump to location')"
  if [ -f "$res" ]; then
    cmd="select"
  elif [ -d "$res" ]; then
    cmd="cd"
  fi
  lf -remote "send $id $cmd \"$res\""
}}

cmd open_config ${{
    res="$(find ~/.config -maxdepth 1 -type d | fzf --reverse --header='Jump to directory')"
    [ -z "$res" ] && exit
    lf -remote "send $id cd \"$res\""
}}

# Remove bindings
map f
map m
map c

# Mappings
map mf mkfile
map md mkdir
map ch chmod
map . set hidden!
map DD delete
map f fzf_jump
map <enter> open
map y copy
map x cut
map p paste
map U unselect
map o open_config

# Movement
map gc cd ~/.config
map gd cd ~/Documents
map gD cd ~/Downloads
map gp cd ~/Pictures
map gv cd ~/Videos
map gs cd ~/Syncthing
